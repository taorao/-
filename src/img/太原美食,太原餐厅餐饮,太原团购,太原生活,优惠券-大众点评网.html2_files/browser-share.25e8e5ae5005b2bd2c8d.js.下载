webpackJsonp([15],{307:function(e,t){var i,n,o='\t  <div class="util-m-share-container">\t    <div class="backdrop"></div>\t    <div class="popup" style="position: fixed;left: 0;right: 0;bottom: -200px;background: #ffffff;z-index: 102;">\t      <div class="title">\t        <div class="text">分享到</div>\t      </div>\t    </div>\t  </div>',c='\t  <div class="share-channel-list clearfix">\t  </div>',a='\t  <a href="javascript:void(0);" class="share-channel-item">\t    <div class="icon"></div>\t    <div class="name"></div>\t  </a>',s={weibo:function(e){return location.protocol+"//service.weibo.com/share/share.php?appkey=1392673069&title="+encodeURIComponent(e.content)+"&url="+encodeURIComponent(e.url)+"&pic="+encodeURIComponent(e.image)},qqzone:function(e){return e.summary||(e.summary=" "),location.protocol+"//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(e.title)+"&desc="+encodeURIComponent(e.desc)+"&url="+encodeURIComponent(e.url)+"&pics="+encodeURIComponent(e.image)+"&summary="+encodeURIComponent(e.summary)+"&site="+encodeURIComponent(location.protocol+"//m.dianping.com")},tecent:function(e){return"http://share.v.t.qq.com/index.php?c=share&amp;a=index&amp;appkey=b0e02c1f67704ba4895b883cf2d86a6c&title="+encodeURIComponent(e.content)+"&url="+encodeURIComponent(e.url)+"&pic="+encodeURIComponent(e.image)+"&site="+encodeURIComponent(location.protocol+"//m.dianping.com")}},r={weibo:{icon:"weibo",text:"新浪微博",onClick:function(){window.location.href=s.weibo(i)},isAvailable:function(){return!0}},qqzone:{icon:"qqzone",text:"QQ空间",onClick:function(){window.location.href=s.qqzone(i)},isAvailable:function(){return!0}},tecentweibo:{icon:"tencentweibo",text:"腾讯微博",onClick:function(){window.location.href=s.tecent(i)},isAvailable:function(){return!0}},wechat:{icon:"wechat",text:"微信好友",onClick:function(){var e=window.ucweb,t=window.ucbrowser;"undefined"!=typeof e?e.startRequest("shell.page_share",[i.title,i.desc,i.url,"WechatFriends","","",i.image]):"undefined"!=typeof t&&t.web_share(i.title,i.desc,i.url,"kWeixin","","",i.image)},isAvailable:function(){return"undefined"!=typeof ucweb||"undefined"!=typeof ucbrowser}},timeline:{icon:"timeline",text:"微信朋友圈",onClick:function(){var e=window.ucweb,t=window.ucbrowser;"undefined"!=typeof e?e.startRequest("shell.page_share",[i.title,i.desc,i.url,"WechatTimeline","","",i.image]):"undefined"!=typeof t&&t.web_share(i.title,i.desc,i.url,"kWeixinFriend","","",i.image)},isAvailable:function(){return"undefined"!=typeof ucweb||"undefined"!=typeof ucbrowser}}},p={0:"wechat",1:"timeline",4:"weibo",5:"qqzone",8:"tecentweibo"},h=function(e,t,i){n=i.$,this.setting=t,t.hide?this._update(e):this._init(e)};h.prototype={_parse:function(e){return e.channelBrowser&&e.channelBrowser.length>0?(e.channel=[],e.channelBrowser.forEach(function(t){p[t]&&e.channel.push(p[t])})):e.channel=["weibo","qqzone","tecentweibo","wechat","timeline"],e},_update:function(e){e=this._parse(e),this.config=e,i=e},_init:function(e){this._update(e),this._set()},_createShareItem:function(e){if(e in r){var t=r[e];if(t.isAvailable()){var i=n(a);return i.on("click",t.onClick),i.find(".icon").addClass(t.icon),i.find(".name").text(t.text),i}}},_setInitPosition:function(){this.popup.css("bottom","-"+this.popup.height()+"px"),this.backdrop.css({display:"none",opacity:"0"})},_createShareContainer:function(){var e=this,t=this.$html=n(o),i=this.backdrop=t.find(".backdrop");this.popup=t.find(".popup");var a=this.config,s=a.channel;i.on("click",function(t){t.preventDefault(),e.hide()});for(var p=0,h=0;h<s.length;h++){var d=r[s[h]];d&&d.isAvailable()&&p++}var l,u,f=Math.ceil(p/Math.ceil(p/4)),m=0;for(h=0;h<s.length;h++){l=s[h],r[l].isAvailable()&&m%f===0&&(u=n(c),t.find(".popup").append(u));var b=this._createShareItem(l);b&&(u.append(b),m++)}this.isCreated=!0,n("body").append(t)},_set:function(){this.config.channel&&this.config.channel.length&&(this._createShareContainer(),this._setInitPosition())},updateConfig:function(e){e&&(e=this._parse(e),this.isCreated=!1,this.remove()),this._init(e)},trigger:function(e){this.isCreated||(this._createShareContainer(),this._setInitPosition()),e&&this.updateConfig(e),this.showWithAnimation()},showWithAnimation:function(){this.backdrop.show(),this.backdrop.animate({opacity:"0.5"},200),this.popup.animate({bottom:"0px"},200)},hide:function(){var e=this;this.backdrop.animate({opacity:"0"},200,"linear",function(){e.backdrop.hide()}),this.popup.animate({bottom:"-"+e.popup.height()+"px"},200)},remove:function(){this.$html&&this.$html.remove()}},e.exports=h}});
//# sourceMappingURL=browser-share.map