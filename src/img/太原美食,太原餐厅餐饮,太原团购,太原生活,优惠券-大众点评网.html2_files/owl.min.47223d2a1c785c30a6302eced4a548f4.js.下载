!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Owl=t():e.Owl=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),a=r(7),s=r(9),c=r(12),u=r(15),f=r(17),p=r(19),g=r(20),h=r(21),l=r(22),d=r(23),v=r(14).version,y=r(11),m=r(6),w=function(){function e(t,r){n(this,e);var i=new o(t);this.errManager=new c(i,this),this.pageManager=new f(i),this.resManager=new u(i,this.errManager),this.metricManager=new p(i),this.cfgManager=i,this.init(),r&&r.noFilter||a(this.cfgManager)}return i(e,[{key:"init",value:function(){this.cfgManager.set({ext:d.getExt()})}},{key:"config",value:function(e){this.cfgManager.set(e)}},{key:"addError",value:function(e,t){t&&t.combo===!1?this.errManager.report(e,t):this.cfgManager.get("error").combo===!1?this.errManager.report(e,t):this.errManager.push(e,t)}},{key:"sendErrors",value:function(){this.errManager.report()}},{key:"addPoint",value:function(e){this.pageManager.push(e)}},{key:"sendPoints",value:function(){this.pageManager.setUserReady(),this.pageManager.report()}},{key:"addApi",value:function(e){if(e){if(void 0!==e.networkCode&&"number"!=typeof e.networkCode)return m.ignore("网络状态码必须为Number类型",JSON.stringify(e));if(void 0!==e.statusCode&&"number"!=typeof e.statusCode)return m.ignore("业务状态码必须为Number类型",JSON.stringify(e));var t={resourceUrl:e.name,statusCode:(e.networkCode||"")+"|"+(e.statusCode||""),responsetime:e.responseTime};e.content&&(t.firstCategory=y.AJAX,t.secondCategory=e.secondCategory||e.name,t.logContent=e.content),this.resManager.pushApi(t)}}},{key:"reportApi",value:function(){this.addApi.apply(this,arguments)}},{key:"sendApis",value:function(){this.resManager.report()}},{key:"updateFilter",value:function(e,t){void 0===t?this.cfgManager.removeFilter(e):this.cfgManager.addFilter(e,t)}},{key:"wrap",value:function(e,t,r){if("function"!=typeof e)return e;try{if(e.__owl_wrapped__)return e;if(e.__owl_wrapper__)return e.__owl_wrapper__}catch(t){return e}var n=function(){try{return e.apply(t,arguments)}catch(e){k.addError(e,r)}};for(var i in e)e.prototype.hasOwnProperty(i)&&(n[i]=e[i]);return n.prototype=e.prototype,e.__owl_wrapper__=n,n.__owl_wrapper__=!0,n}}]),e}(),k=new w({},{noFilter:!0});k.OWL=w,k.__version__=v,k.errorModel=s,k.MetricManager=p,k.start=function(e){if(window.navigator.userAgent.indexOf("Baiduspider")!==-1)return m.ignore("当前环境被判断为百度爬虫，监控功能关闭");if(!this.isStarted){this.isStarted=!0,k.cfgManager.set({pageUrl:window.location.href}),e&&(k.cfgManager.set(e),k.cfgManager.checkUpdate()),a(this.cfgManager),l(k.pageManager),g(k.errManager),h(k.resManager,k.errManager);var t=e.preLoadName||"_Owl_";if(window[t]){window[t].isReady=!0;var n=window[t],i=n.config,o=n.preTasks,s=n.dataSet;k.cfgManager.set({autoCatch:i}),o&&o.length&&(o.forEach(function(e){k[e.api].apply(k,e.data)}),window[t].preTasks=[]),setTimeout(function(){s&&s.length&&s.forEach(function(e){e&&"jsError"===e.type?k.errManager.parseWindowError.apply(k.errManager,e.data):"resError"===e.type?k.resManager.parseResError.apply(k.resManager,e.data):"resTime"===e.type?k.resManager.parseRes.apply(k.resManager,e.data):"pageTime"===e.type&&k.pageManager.parsePageTime.apply(k.pageManager,e.data)}),window[t].dataSet=[]},0)}k.errManager.checkCache();var c=r(25);c("owl_sdk",k)}},e.exports=k},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),s=r(3)(),c=r(4),u=r(6),f=window.location.protocol?window.location.protocol:"http:",p=f+"//catfront.dianping.com",g=f+"//catfront.51ping.com",h="owl_config",l=36e5,d=function(){function e(t){n(this,e),this.url=p,this.filters=[],this._config={devMode:!1,project:"",pageUrl:"",disabledFilters:[],noScriptError:!0,ignoreList:{js:[],ajax:["https?://report.meituan.com/"],resource:["https?://hls.dianping.com/"]},ext:{},resourceReg:/(.51ping|.dianping|.dpfile|.meituan|.sankuai|.maoyao|.kuxun)/,disableCache:!1,invalid:{ajax:!0},autoCatch:{page:!0,ajax:!0,js:!0,resource:!0},ajax:{flag:!1,duration:2e3},image:{flag:!1,duration:5e3,fileSize:100,filter:function(){return!1}},resource:{sample:.1,sampleApi:.1,combo:!0,delay:1e3},page:{auto:!0,sample:.5},error:{sample:1,delay:1e3,combo:!1},metric:{sample:.5,combo:!0,delay:1500}},this.userConfig={},this.config={},t&&this.set(t)}return o(e,[{key:"removeFilter",value:function(e){for(var t=0;t<this.filters.length;t++){var r=this.filters[t];if(r.key===e)return void this.filters.splice(t,1)}}},{key:"addFilter",value:function(e,t){if(e&&t instanceof Function&&this.config.disabledFilters.indexOf(e)===-1){for(var r=-1,n=0;n<this.filters.length;n++){var i=this.filters[n];i.key===e&&(r=n,i.fn=t)}r===-1&&this.filters.push({key:e,fn:t})}}},{key:"get",value:function(e){return e?this.config[e]:this.config}},{key:"set",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){if("devMode"===t&&(e[t]?this.url=g:this.url=p),"resourceReg"===t)try{this.userConfig[t]=new RegExp(e[t])}catch(e){u.ignore(e)}"object"!==i(e[t])||e[t]instanceof RegExp||e[t]instanceof Array?this.userConfig[t]=e[t]:this.userConfig[t]=a(this.userConfig[t],e[t])}this.update()}},{key:"update",value:function(){this.config=this._config;for(var e in this.userConfig){var t=this.userConfig[e];"object"!=("undefined"==typeof t?"undefined":i(t))||t instanceof RegExp||t instanceof Array?this.config[e]=t:this.config[e]=a(this.config[e],this.userConfig[e])}}},{key:"reset",value:function(){this.config=this._config}},{key:"_setDefault",value:function(e){e&&(e.resourceReg&&(e.resourceReg=new RegExp(e.resourceReg)),this._config=a(this._config,e),this.update())}},{key:"checkUpdate",value:function(){var e=this;try{var t=this.initFromCache();if(t){var r=t.delay||l;+new Date-t.ts>r||0===Object.keys(t).length?c({url:this.url+"/api/config",success:function(t){t?(e.updateCache(t.config,t.md5,t.delay),e._setDefault(t.config)):e.clearCache()},fail:function(){e._setDefault(t.config)}}):this._setDefault(t.config)}}catch(e){u.ignore(e)}}},{key:"updateCache",value:function(e,t,r){if(e){var n={config:e,ts:+new Date,md5:t,delay:r||l};if(s)try{window.localStorage.setItem(h,JSON.stringify(n))}catch(e){u.ignore(e)}}}},{key:"clearCache",value:function(){if(s)try{window.localStorage.removeItem(h)}catch(e){u.ignore(e)}}},{key:"initFromCache",value:function(){var e=void 0;if(s)try{e=window.localStorage.getItem(h),e=e?JSON.parse(e):{}}catch(t){e={},u.ignore(t)}return e}}]),e}();e.exports=d},function(e,t){"use strict";e.exports=function(e,t){var r={},n=void 0;for(n in e)r[n]=e[n];for(n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(r[n]=t[n]);return r}},function(e,t){"use strict";e.exports=function(){var e="local_test";try{localStorage.setItem(e,1),localStorage.removeItem(e)}catch(e){return!1}return!0}},function(e,t,r){"use strict";var n=window,i=n.XMLHttpRequest,o=r(5),a=r(6),s=function(){},c=function(){if(i&&!("_owl"in i)){i._owl=!0;var e=n.location.protocol;if("file:"!==e){var t=i.prototype.open,r=i.prototype.send;i.prototype.open=function(e,r){return this.url=r,this._startTime=+new Date,t.apply(this,arguments)},i.prototype.send=function(){var e=this,t="addEventListener",n="onreadystatechange",i=function(t){if(t){var r=+new Date-e._startTime;if(t.duration=r,/catfront.(dianping|51ping).com/.test(e.url)){var n=void 0;try{e.getAllResponseHeaders("content-type").indexOf("application/json")!==-1&&(n=t.currentTarget.response,n=JSON.parse(n))}catch(e){a.ignore(e)}200===t.currentTarget.status?e.success&&e.success(n):e.fail&&e.fail(n)}else o.trigger("ajaxCall",t)}};if(t in this)this[t]("load",i),this[t]("error",i),this[t]("abort",i);else{var s=this[n];this[n]=function(e){4===this.readyState&&i(e),s&&s.apply(this,arguments)}}return r.apply(this,arguments)}}}};c(),e.exports=function(e){if(e){var t=window.navigator.userAgent,r=window.navigator.appName,n=r.indexOf("Microsoft Internet Explorer")!==-1&&(t.indexOf("MSIE 8.0")!==-1||t.indexOf("MSIE 9.0")!==-1),i=n&&window.XDomainRequest,o=void 0;if(o=i?new XDomainRequest:new XMLHttpRequest,o.open(e.type||"GET",e.url,!0),o.success=e.success||s,o.fail=e.fail||s,"POST"===e.type){if(e.header&&!i)for(var a in e.header)e.header.hasOwnProperty(a)&&o.setRequestHeader(a,e.header[a]);o.send(e.data)}else o.send()}}},function(e,t){"use strict";e.exports={on:function(e,t){if(e){this._events_||(this._events_={});var r=this._events_;r[e]||(r[e]=[]),r[e].push(t)}},trigger:function(e){var t=this._events_;if(e&&t&&t[e])for(var r=t[e],n=r.length,i=Array.prototype.slice.call(arguments,1),o=0;o<n;o++)r[o].apply(this,i)}}},function(e,t){"use strict";e.exports={ignore:function(){window._Owl_&&window._Owl_.debug&&window.console.log&&window.console.log.apply(window.console,arguments)}}},function(e,t,r){"use strict";var n=r(8),i=window.navigator.userAgent;e.exports=function(e){e.get("devMode")||(e.addFilter("base",n.base),/MicroMessenger/.test(i)?e.addFilter("weixin",n.weixin):/dp\/com\.dianping/.test(i)&&e.addFilter("dianping",n.dianping))}},function(e,t){"use strict";e.exports={base:function(e){return!e.resourceUrl||/\.(dpfile|dianping|51ping|meituan)\.(com|net)/.test(e.resourceUrl)},weixin:function(e){return!/(WeixinJSBridge|_WXJS|WebViewJavascriptBridge)/.test(e.sec_category)},dianping:function(e){return!/document.elementFromPoint/.test(e.sec_category)}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=r(10),s=r(11),c=["project","pageUrl","realUrl","resourceUrl","category","sec_category","level","timestamp","content"],u=["rowNum","colNum","tags"].concat(c),f=function(){function e(t){if(n(this,e),t){var r=void 0;for(r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);this.parse(t)}}return i(e,[{key:"parse",value:function(){this.category||(this.category=s.SCRIPT),this.level||(this.level=a.ERROR),this.timestamp||(this.timestamp=+new Date),this.sec_category||(this.sec_category="default")}},{key:"isEqual",value:function(e){return this.sec_category===e.sec_category&&this.resourceUrl===e.resourceUrl&&this.colNum===e.colNum&&this.rowNum===e.rowNum&&this.content===e.content}},{key:"update",value:function(e){for(var t in e)void 0!==e[t]&&u.indexOf(t)!==-1&&(this[t]=e[t]);return this}},{key:"updateTags",value:function(e){var t=o(this.tags||{},e);return this.tags=t,this}},{key:"toJson",value:function(){var e=this,t=this.rowNum,r=this.colNum,n={};return c.map(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.category===s.SCRIPT&&t&&r&&(n.dynamicMetric={rowNum:t,colNum:r}),this.tags&&(n.dynamicMetric=o(n.dynamicMetric||{},this.tags)),n}}]),e}();f.LEVEL=a,f.CATEGORY=s,e.exports=f},function(e,t){"use strict";e.exports={ERROR:"error",INFO:"info",WARN:"warn",DEBUG:"debug"}},function(e,t){"use strict";e.exports={SCRIPT:"jsError",AJAX:"ajaxError",RESOURCE:"resourceError"}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),s=r(2),c=r(9),u=r(13),f=r(14).version,p=r(11),g=r(6),h=function(e){var t=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),r=e.toString();return t.indexOf(r)<0&&(t=r+"@"+t),t},l="/api/log?v=1&sdk="+f,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.data&&(e.beforeSend&&e.beforeSend(),a({type:"POST",url:e.url,header:{"Content-Type":"application/x-www-form-urlencoded"},data:"c="+encodeURIComponent(JSON.stringify(e.data)),success:e.success,fail:e.fail}))},v=function(){function e(t,r){n(this,e),this.parent=r,this.cfgManager=t,this.cache=[],this.comboTimeout=0,this.detectLeave()}return o(e,[{key:"getPageUrl",value:function(){return window.location.href}},{key:"_handleError",value:function(e){try{var t=this.cfgManager.get("onErrorPush");if(t instanceof Function&&(e=t(e)),e instanceof c||void 0===e)return e;g.ignore("onErrorPush方法返回结果有误")}catch(t){return g.ignore("onErrorPush方法处理有误",t),e}}},{key:"parseWindowError",value:function(e,t,r,n,i){try{i&&i.stack?this.push(i):"string"==typeof e&&this._push({category:p.SCRIPT,sec_category:e,resourceUrl:t,rowNum:r,colNum:n})}catch(e){this.reportSystemError(e)}}},{key:"parsePromiseUnhandled",value:function(e){if(e)try{var t=e.reason;t&&this._push({category:p.SCRIPT,sec_category:"unhandledrejection",content:t})}catch(e){g.ignore(e)}}},{key:"detectLeave",value:function(){var e=this,t=arguments,r=window.onbeforeunload;window.onbeforeunload=function(){e.cfgManager.get("disableCache")||u.add(e.cache),r&&r.apply(e,t)}}},{key:"checkCache",value:function(){var e=this,t=u.get();t&&t.length&&setTimeout(function(){d({url:e.cfgManager.url+l,data:t,success:function(){u.clear()}})},1500)}},{key:"reportSystemError",value:function(e){var t=this;e&&e.stack&&(this.cache.push(new c({project:"owl",pageUrl:"default",realUrl:t.getPageUrl(),sec_category:e.msg||e.name||"parseError",content:JSON.stringify(e.stack)})),this.send(!0))}},{key:"_processError",value:function(e){var t=function(e){var t="object"===("undefined"==typeof e?"undefined":i(e))?JSON.stringify(e):e;return{category:p.SCRIPT,sec_category:"Invalid_Error",content:t}},r=function(e){var r=e.line,n=e.column,i=e.message||e.name||"";if(e.stack){var o=e.stack.match("https?://[^\n]+");o=o?o[0]:"";var a=/https?:\/\/(\S)*\.js/,s="";a.test(o)&&(s=o.match(a)[0]);var c=o.match(":(\\d+):(\\d+)");c||(c=[0,0,0]);var u=h(e);return{category:p.SCRIPT,sec_category:i,content:u,rowNum:void 0!==r?r:c[1],colNum:void 0!==n?n:c[2],resourceUrl:s}}return t(e)};try{return r(e)}catch(r){return this.reportSystemError(e),t(e)}}},{key:"_push",value:function(e,t){e=this.parse(e),this.push(new c(e),t)}},{key:"_pushResource",value:function(){var e=this.cfgManager.get("resource").sample;Math.random()>e||this._push.apply(this,arguments)}},{key:"parse",value:function(e){return e.project||(e.project=this.cfgManager.get("project")),e.pageUrl||(e.pageUrl=this.cfgManager.get("pageUrl")||"default"),e.realUrl=this.getPageUrl(),e}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.cfgManager;if(e&&!(Math.random()>r.get("error").sample)){e instanceof c||(e instanceof Error?e=this._processError(e):"string"==typeof e?e={sec_category:e}:"object"===("undefined"==typeof e?"undefined":i(e))&&(e={sec_category:e.name,content:e.msg}),e=this.parse(e),e=new c(e)),e.update(t);var n=r.filters,o=!0;if(this.cfgManager.get("noScriptError")&&0===e.sec_category.indexOf("Script error"))return o=!1;if(n&&n.length)for(var a=0;a<n.length;a++){var s=n[a];if(!s.fn(e))return o=!1}var u=r.get("ignoreList").js;if(u&&u.length)for(var f=0;f<u.length;f++){var p=u[f];if(0===e.sec_category.indexOf(p))return o=!1}o&&(this.isExist(e)||(this.onPush&&this.onPush(e),e=this._handleError(e),e&&(this.cache.push(e),this.send())))}}},{key:"isExist",value:function(e){for(var t=0;t<this.cache.length;t++){var r=this.cache[t];if(r instanceof c||(r=new c(r)),r.isEqual(e))return!0}return!1}},{key:"report",value:function(){this.push.apply(this,arguments),this.send(!0)}},{key:"send",value:function(e){var t=this,r=this.cfgManager,n=this.comboTimeout,i=function(){if(t.cache.length){clearTimeout(n),n=0,t.onSubmit&&t.onSubmit(t.cache);var e=t.getCache();d({url:t.cfgManager.url+l,data:e,beforeSend:function(){t.nextCache=e,t.cache=[]},success:function(){t.nextCache=[]},fail:function(){t.cfgManager.get("disableCache")||u.add(t.nextCache)}})}},o=r.get("error").delay;e?i():n||o===-1||(n=setTimeout(i,o))}},{key:"getCache",value:function(){var e=this.cfgManager,t=this.cache,r=[],n=e.get("ext");if(t&&t.length){for(var o=0;o<t.length;o++){var a=t[o];n&&"object"===("undefined"==typeof n?"undefined":i(n))&&(a=s(a.toJson(),n)),r.push(a)}return r}}}]),e}();e.exports=v},function(e,t,r){"use strict";var n="owl_cache",i=r(3),o=r(6);e.exports={isSupport:i(),get:function(){if(this.isSupport){var e=[];try{var t=localStorage.getItem(n);t&&(e=JSON.parse(t))}catch(e){o.ignore(e)}return e}},add:function(e){if(this.isSupport&&e instanceof Array){var t=this.get();e=e.concat(t);try{localStorage.setItem(n,JSON.stringify(e))}catch(e){o.ignore(e)}}},clear:function(){if(this.isSupport)try{localStorage.removeItem(n)}catch(e){o.ignore(e)}}}},function(e,t){"use strict";t.version="1.5.16"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),a=r(16),s=r(14).version,c=r(11),u=r(5),f=r(6),p={region:1,operator:2,network:3,container:4,os:5},g=10,h=window.performance&&void 0!==window.performance.getEntries,l=function(e){var t=e.split("//");if(t&&t.length>1)return t[0]+"//"+t[1].split("/")[0]+"/images"},d=function(){function e(t,r){n(this,e),this.cfgManager=t,this.errManager=r,this.cache=[],this.comboTimeout=0}return i(e,[{key:"parseAjax",value:function(e){var t=void 0,r=void 0,n=void 0,i=void 0,o=void 0;try{t=e.type,r=e.currentTarget.responseURL||e.currentTarget.url,n=e.duration,i=e.total,o=e.currentTarget.status}catch(e){return e}if(void 0!==n&&!isNaN(n)){var a="load"===t||"readystatechange"===t&&200===o;0===r.indexOf("//")?r=window.location.protocol+r:0===r.indexOf("/")&&(r=window.location.origin+r),o=(a?200:500)+"|";var s=this.cfgManager,u=!0;try{var p=s.get("ignoreList").ajax;if(p)for(var g=0;g<p.length;g++){var h=p[g],l=new RegExp(h);if(l.test(r))return void(u=!1)}}catch(e){f.ignore(e)}if(u){var d=s.get("devMode")||s.get("resourceReg").test(r);d?!s.get("ajax").flag||n<s.get("ajax").duration?this.pushApi({resourceUrl:r,responsetime:n,responsebyte:i,statusCode:o,firstCategory:a?"":c.AJAX}):this.errManager.push({name:"TIMEOUT_AJAX",msg:"ajax请求时间超过设定"+r},{category:c.AJAX}):s.get("invalid").ajax&&Math.random()<.1&&this.errManager.push({name:"INVALID_AJAX",msg:r},{category:c.AJAX})}}}},{key:"parseRes",value:function(){var e=this;try{if(h){var t=window.performance.getEntries(),r=t,n=[],i=function(e){return e.filter(function(e){return["link","script","img","css"].indexOf(e.initiatorType)!==-1})},o=function(t){for(var r=e.cfgManager,i=0;i<t.length;i++){var o=t[i],a=o.name,s=r.get("ignoreList").resource,u=!0;try{for(var p=0;p<s.length;p++){var g=s[p],h=new RegExp(g);if(h.test(a))return void(u=!1)}}catch(e){f.ignore(e)}if(!u)return;if(r.get("devMode")||r.get("resourceReg").test(a)){n.push(a);var l="200|",d=r.get("image"),v=!1;if(("img"===o.initiatorType||"css"===o.initiatorType)&&d.flag){var y=o.name,m=d.filter;if("function"==typeof m&&!m(y)){var w=o.transferSize,k=o.duration,b=void 0;w&&w>1e3*d.fileSize?b="IMAGE_SIZE_EXCEED":k&&k>d.duration&&(b="IMAGE_DURATION_EXCEED"),b&&(e.errManager._pushResource({content:y,sec_category:b},{category:c.RESOURCE}),v=!0)}}v||e.push({resourceUrl:a,responsebyte:o.transferSize,responsetime:o.duration,statusCode:l})}}e.report()};o(i(t)),u.on("ajaxCall",function(){setTimeout(function(){var e=window.performance.getEntries();if(e=i(e),e.length!==r.length&&e.length>r.length){for(var t=[],a=0;a<e.length;a++)n.indexOf(e[a].name)===-1&&t.push(e[a]);r=e,o(t)}},1500)})}}catch(e){this.errManager.reportSystemError(e)}}},{key:"parseResError",value:function(e){var t=this,r=e.target||e.srcElement,n=function(){var e=r.src||r.href,n=r.nodeName;if(n&&(n=n.toLowerCase()),0!==window.location.href.indexOf(e)){var i=e;"img"===n&&(i=l(e)),i&&(h?t.pushApi({resourceUrl:i,responsetime:0,responsebyte:0,statusCode:"500|",firstCategory:c.RESOURCE,secondCategory:n,logContent:e}):t.errManager._pushResource({category:c.RESOURCE,sec_category:n,content:e}))}};if(!(r instanceof Window||e.error))try{n()}catch(e){this.errManager.reportSystemError(e)}}},{key:"_stringify",value:function(){var e=this.cache;if(e&&e.length){var t=[],r=this.cfgManager.get("ext"),n=[];for(var i in r)r.hasOwnProperty(i)&&(n[p[i]]=r[i]);r="S\t"+n.join("\t"),t.push(r);for(var o=0;o<e.length;o++){var a=e[o];t.push(a.stringify())}return this.cache=[],t=t.join("\n")}}},{key:"_push",value:function(e){e=this.parse(e);var t=new a(e);this.onPush&&this.onPush(t),this.cache.push(t)}},{key:"push",value:function(e){var t=this.cfgManager;Math.random()>t.get("resource").sample||(this._push(e),this.cache.length>=g?this.report(!0):this.triggerReport())}},{key:"parse",value:function(e){return e.pageUrl||(e.pageUrl=this.cfgManager.get("pageUrl")),e.project||(e.project=this.cfgManager.get("project")),e}},{key:"pushApi",value:function(e){var t=this.cfgManager;Math.random()>t.get("resource").sampleApi||(this._push(e),this.triggerReport())}},{key:"report",value:function(){this.triggerReport(!0)}},{key:"triggerReport",value:function(e){var t=this,r=this.cfgManager;if(this.cache.length){var n=function(){clearTimeout(t.comboTimeout),t.comboTimeout=0,t.onSubmit&&t.onSubmit(t.cache),t.send()},i=r.get("resource").delay;e?this.send():this.comboTimeout||i===-1||(this.comboTimeout=setTimeout(n,i))}}},{key:"send",value:function(){this.onSubmit&&this.onSubmit(this.cache);var e=this._stringify();if(e){var t=this.cfgManager.url+"/api/batch?v=1&sdk="+s;o({type:"POST",url:t,header:{"Content-Type":"application/x-www-form-urlencoded"},data:"c="+encodeURIComponent(e)}),this.cache=[]}}}]),e}();e.exports=d},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=["resourceUrl","timestamp","requestbyte","responsebyte","responsetime","project","pageUrl","statusCode","firstCategory","secondCategory","logContent"],o=function(){function e(t){var n=this;r(this,e),i.forEach(function(e){n[e]=t[e]}),this.parse()}return n(e,[{key:"parse",value:function(){this.timestamp||(this.timestamp=+new Date),this.requestbyte||(this.requestbyte=0),this.responsebyte||(this.responsebyte=0)}},{key:"stringify",value:function(){var e=this,t=i.map(function(t){return e[t]});return t.join("\t")}}]),e}();e.exports=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),a=r(18),s=r(2),c=r(14).version,u=function(){function e(t){n(this,e),this.points=[],this.pointsCustom=[],this.cfgManager=t}return i(e,[{key:"setUserReady",value:function(){this.cfgManager.set({page:{auto:!0}})}},{key:"getUserReady",value:function(){return this.cfgManager.get("page").auto}},{key:"setReady",value:function(){this.isReady=!0}},{key:"getReady",value:function(){return this.isReady}},{key:"parsePageTime",value:function(e){if(!e)return this.setReady();var t=e.navigationStart,r={unloadEventStart:1,unloadEventEnd:2,redirectStart:3,redirectEnd:4,fetchStart:5,domainLookupStart:6,domainLookupEnd:7,connectStart:8,connectEnd:9,requestStart:10,responseStart:11,responseEnd:12,domLoading:13,domInteractive:14,domContentLoadedEventStart:15,domContentLoadedEventEnd:16,domComplete:17,loadEventStart:18,loadEventEnd:19},n=void 0;for(n in e)0===e[n]?this.points[r[n]]=e[n]:this.points[r[n]]=e[n]-t;this.points[20]=e.domainLookupEnd-e.domainLookupStart,this.points[21]=e.connectEnd-e.connectStart,this.points[22]=e.responseEnd-e.requestStart;for(var i=0;i<this.points.length;i++)isNaN(this.points[i])&&(this.points[i]=0);this.setReady(),this.report()}},{key:"push",value:function(e){this.onPush&&this.onPush(e),e&&"number"==typeof e.position&&(e.position<0||e.position>31||(this.pointsCustom[e.position]=e.duration))}},{key:"report",value:function(){var e=this.cfgManager;if(this.getReady()&&this.getUserReady()&&(this.points.length||this.pointsCustom.length)&&!(Math.random()>e.get("page").sample)){this.onSubmit&&this.onSubmit(this.points,this.pointsCustom);var t=e.url+"/api/speed?v=1",r=e.get("ext");r=s({project:e.get("project"),pageurl:encodeURIComponent(e.get("pageUrl")),speed:this.points.join("|"),customspeed:this.pointsCustom.join("|"),timestamp:+new Date,sdk:c},r),delete r.unionId,t=a.stringify(t,r),o({method:"GET",url:t}),this.points=[],this.pointsCustom=[]}}}]),e}();e.exports=u},function(e,t){"use strict";e.exports={stringify:function(e,t){if(!t)return e;var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(n+"="+t[n]);return~e.indexOf("?")?e+"&"+r.join("&"):e+"?"+r.join("&")}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=r(4),s=r(6),c=function(){function e(t){n(this,e),this.cfgManager=t,this.tags={},this.kvs={},this.random=Math.random()}return i(e,[{key:"setTags",value:function(e){this.tags=o(this.tags,e)}},{key:"getTags",value:function(e){return e?this.tags[e]:this.tags}},{key:"setMetric",value:function(e,t){var r=this;if("string"!=typeof e)return s.ignore("metric名称必须是string类型");if("number"!=typeof t)return s.ignore("metric值必须是number类型,当前为"+e+"-"+t);this.kvs[e]||(this.kvs[e]=[]),this.kvs[e].push(t);try{this.cfgManager.get("metric").combo&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(function(){r.report()},this.cfgManager.get("metric").delay||1500))}catch(e){throw e}}},{key:"getMetric",value:function(e){return e?this.kvs[e]:this.kvs}},{key:"clearMetric",value:function(){this.kvs={}}},{key:"_rollbackMetric",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.kvs[t]=e[t].concat(this.kvs[t]||[]))}},{key:"report",value:function(){var e=this;if(!(this.random>this.cfgManager.get("metric").sample)){var t=this.cfgManager,r=t.get("project");if(this.kvs&&0!==Object.keys(this.kvs).length){var n={kvs:this.kvs,tags:this.tags,ts:parseInt(+new Date/1e3)},i=this.kvs;this.clearMetric(),a({type:"POST",url:t.url+("/api/metric?v=1&p="+r),header:{"Content-Type":"application/x-www-form-urlencoded"},data:"data="+encodeURIComponent(JSON.stringify(n)),fail:function(){e._rollbackMetric(i)}})}}}}]),e}();e.exports=c},function(e,t){"use strict";e.exports=function(e){var t=window.onerror;if(e){var r=e.cfgManager;if(r.get("autoCatch").js!==!1){window.onerror=function(){e.parseWindowError.apply(e,arguments),t&&t.apply(window,arguments)};var n=window.addEventListener||window.attachEvent;n("unhandledrejection",function(){e.parsePromiseUnhandled.apply(e,arguments)})}}}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e){var t=e.cfgManager;t.get("autoCatch").ajax&&n.on("ajaxCall",function(){e.parseAjax.apply(e,arguments)});var r=window.addEventListener||window.attachEvent;t.get("autoCatch").resource&&(r("load",function(){e.parseRes.apply(e,arguments)}),r("error",function(t){t&&e.parseResError.apply(e,arguments)},!0))}},function(e,t){"use strict";e.exports=function(e){var t=e.cfgManager;if(t.get("autoCatch").page&&!e.getReady()){var r=window.addEventListener||window.attachEvent;r("load",function(){var t=window.performance&&window.performance.timing;e.parsePageTime(t)})}}},function(e,t,r){"use strict";var n=r(24);e.exports={getExt:function(){var e=n("network");if(!e){var t=navigator.userAgent,r=/NetType\/([a-zA-Z0-9]+)/;t&&r.test(t)&&(e=t.match(r)[1])}var i=n("dpid")||n("_hc.v"),o={};return e&&(o.network=e),i&&(o.unionId=i),o}}},function(e,t){"use strict";e.exports=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}},function(e,t,r){"use strict";var n=r(4),i=r(18),o=r(14).version,a=r(6),s=.01;e.exports=function(e,t){if(e&&t&&!(Math.random()>s)){var r=function(e,t){try{e=e.split(".").map(function(e){return parseInt(e)}),t=t.split(".").map(function(e){return parseInt(e)});var r=void 0;return r=e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?e[1]-t[1]:e[2]-t[2],r>=0}catch(e){return a.ignore(e),!1}};if(!r(t.cfgManager.get("version"),o)){var c={v:1,rate:s,project:e,version:"v_"+o,pageurl:encodeURIComponent(window.location.href),count:1},u=t.cfgManager.url+"/api/version";u=i.stringify(u,c),setTimeout(function(){n({type:"GET",url:u})},1500)}}}}])});